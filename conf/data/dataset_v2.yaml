shared_params:
  contexts_path: null
  max_context_length: 64
  max_contexts_per_batch: 64
  max_questions_per_batch: 64
  prefetch_batches: True
  use_topics: False

datamodule:
  _target_: goldenretriever.lightning_modules.pl_data_modules.PLDataModule
  tokenizer: ${model.language_model}
  datasets:
    train:
      _target_: goldenretriever.data.dpr.datasets.InBatchNegativesDPRIterableDataset
      name: 'train'
      path: null
      contexts_path: ${data.shared_params.contexts_path}
      max_context_length: ${data.shared_params.max_context_length}
      max_questions_per_batch: ${data.shared_params.max_questions_per_batch}
      max_contexts_per_batch: ${data.shared_params.max_contexts_per_batch}
      prefetch_batches: ${data.shared_params.prefetch_batches}
      subsample: null
      random_subsample: False
      shuffle: True
      use_topics: ${data.shared_params.use_topics}

    val:
      - _target_: goldenretriever.data.dpr.datasets.InBatchNegativesDPRIterableDataset
        name: 'val'
        path: null
        contexts_path: ${data.shared_params.contexts_path}
        max_context_length: ${data.shared_params.max_context_length}
        max_questions_per_batch: ${data.shared_params.max_questions_per_batch}
        max_contexts_per_batch: ${data.shared_params.max_contexts_per_batch}
        prefetch_batches: ${data.shared_params.prefetch_batches}
        use_topics: ${data.shared_params.use_topics}

    test:
      - _target_: goldenretriever.data.dpr.datasets.InBatchNegativesDPRIterableDataset
        name: 'test'
        path: null
        contexts_path: ${data.shared_params.contexts_path}
        max_context_length: ${data.shared_params.max_context_length}
        max_questions_per_batch: ${data.shared_params.max_questions_per_batch}
        max_contexts_per_batch: ${data.shared_params.max_contexts_per_batch}
        prefetch_batches: ${data.shared_params.prefetch_batches}
        use_topics: ${data.shared_params.use_topics}
